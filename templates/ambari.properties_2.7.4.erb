# Copyright 2011 The Apache Software Foundation
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# File managed by Chef -- changes will be overwritten
#

agent.package.install.task.timeout=1800
agent.stack.retry.on_repo_unavailability=false
agent.stack.retry.tries=5
agent.task.timeout=900
agent.threadpool.size.max=25
ambari.python.wrap=ambari-python-wrap
ambari-server.user=<%= node['hw']['ambari']['server']['user']['name'] %>
bootstrap.dir=$ROOT/var/run/ambari-server/bootstrap
bootstrap.script=$ROOT/usr/lib/ambari-server/lib/ambari_server/bootstrap.py
bootstrap.setup_agent.script=$ROOT/usr/lib/ambari-server/lib/ambari_server/setupAgent.py
client.threadpool.size.max=25
common.services.path=$ROOT/var/lib/ambari-server/resources/common-services
custom.action.definitions = $ROOT/var/lib/ambari-server/resources/custom_action_definitions
extensions.path=$ROOT/var/lib/ambari-server/resources/extensions
gpl.license.accepted=<%= node['hw']['ambari']['server']['config']['ambari.properties']['gpl.license.accepted'] %>
http.cache-control=no-store
http.charset=utf-8
http.pragma=no-cache
http.strict-transport-security=max-age=31536000
http.x-content-type-options=nosniff
http.x-frame-options=DENY
http.x-xss-protection=1; mode=block
java.home=<%= node['java']['setup']['app_dir'] %>/<%= node['java'][@java_install][@java_version]['extract_dir'] %>
java.releases=jdk1.8
java.releases.ppc64le=
jce.download.supported=true
jdk1.8.desc=Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8
jdk1.8.dest-file=jdk-8u112-linux-x64.tar.gz
jdk1.8.home=$ROOT/usr/jdk64/
jdk1.8.jcpol-file=jce_policy-8.zip
jdk1.8.jcpol-url=http://public-repo-1.hortonworks.com/ARTIFACTS/jce_policy-8.zip
jdk1.8.re=(jdk.*)/jre
jdk1.8.url=http://public-repo-1.hortonworks.com/ARTIFACTS/jdk-8u112-linux-x64.tar.gz
jdk.download.supported=true
kerberos.keytab.cache.dir=$ROOT/var/lib/ambari-server/data/cache
kerberos.operation.verify.kdc.trust=true
metadata.path=$ROOT/var/lib/ambari-server/resources/stacks
mpacks.staging.path=$ROOT/var/lib/ambari-server/resources/mpacks
pid.dir=$ROOT/var/run/ambari-server
recommendations.artifacts.lifetime=1w
recommendations.dir=$ROOT/var/run/ambari-server/stack-recommendations
resources.dir=$ROOT/var/lib/ambari-server/resources
rolling.upgrade.skip.packages.prefixes=
security.server.disabled.ciphers=TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384|TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384|TLS_RSA_WITH_AES_256_CBC_SHA256|TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384|TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384|TLS_DHE_RSA_WITH_AES_256_CBC_SHA256|TLS_DHE_DSS_WITH_AES_256_CBC_SHA256|TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA|TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA|TLS_RSA_WITH_AES_256_CBC_SHA|TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA|TLS_ECDH_RSA_WITH_AES_256_CBC_SHA|TLS_DHE_RSA_WITH_AES_256_CBC_SHA|TLS_DHE_DSS_WITH_AES_256_CBC_SHA|TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256|TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256|TLS_RSA_WITH_AES_128_CBC_SHA256|TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256|TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256|TLS_DHE_RSA_WITH_AES_128_CBC_SHA256|TLS_DHE_DSS_WITH_AES_128_CBC_SHA256|TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA|TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA|TLS_RSA_WITH_AES_128_CBC_SHA|TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA|TLS_ECDH_RSA_WITH_AES_128_CBC_SHA|TLS_DHE_RSA_WITH_AES_128_CBC_SHA|TLS_DHE_DSS_WITH_AES_128_CBC_SHA|TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA|TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA|TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA|TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA|SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA|SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA|TLS_EMPTY_RENEGOTIATION_INFO_SCSV|TLS_DH_anon_WITH_AES_256_CBC_SHA256|TLS_ECDH_anon_WITH_AES_256_CBC_SHA|TLS_DH_anon_WITH_AES_256_CBC_SHA|TLS_DH_anon_WITH_AES_128_CBC_SHA256|TLS_ECDH_anon_WITH_AES_128_CBC_SHA|TLS_DH_anon_WITH_AES_128_CBC_SHA|TLS_ECDH_anon_WITH_3DES_EDE_CBC_SHA|SSL_DH_anon_WITH_3DES_EDE_CBC_SHA|SSL_RSA_WITH_DES_CBC_SHA|SSL_DHE_RSA_WITH_DES_CBC_SHA|SSL_DHE_DSS_WITH_DES_CBC_SHA|SSL_DH_anon_WITH_DES_CBC_SHA|SSL_RSA_EXPORT_WITH_DES40_CBC_SHA|SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA|SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA|SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA|TLS_RSA_WITH_NULL_SHA256|TLS_ECDHE_ECDSA_WITH_NULL_SHA|TLS_ECDHE_RSA_WITH_NULL_SHA|SSL_RSA_WITH_NULL_SHA|TLS_ECDH_ECDSA_WITH_NULL_SHA|TLS_ECDH_RSA_WITH_NULL_SHA|TLS_ECDH_anon_WITH_NULL_SHA|SSL_RSA_WITH_NULL_MD5|TLS_KRB5_WITH_3DES_EDE_CBC_SHA|TLS_KRB5_WITH_3DES_EDE_CBC_MD5|TLS_KRB5_WITH_DES_CBC_SHA|TLS_KRB5_WITH_DES_CBC_MD5|TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA|TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5
security.server.disabled.protocols=SSL|SSLv2|SSLv3
security.server.keys_dir=$ROOT/var/lib/ambari-server/keys
server.connection.max.idle.millis=900000
server.execution.scheduler.isClustered=false
server.execution.scheduler.maxDbConnections=5
server.execution.scheduler.maxThreads=5
server.execution.scheduler.misfire.toleration.minutes=480
server.fqdn.service.url=http://169.254.169.254/latest/meta-data/public-hostname
server.http.session.inactive_timeout=1800
server.jdbc.connection-pool=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.connection-pool'] %>
server.jdbc.database_name=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.database_name'] %>
server.jdbc.database=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.database'] %>
server.jdbc.driver=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.driver'] %>
server.jdbc.hostname=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.hostname'] %>
server.jdbc.port=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.port'] %>
server.jdbc.postgres.schema=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.postgres.schema'] %>
server.jdbc.rca.driver=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.rca.driver'] %>
server.jdbc.rca.url=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.rca.url'] %>
server.jdbc.rca.user.name=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.rca.user.name'] %>
server.jdbc.rca.user.passwd=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.rca.user.passwd'] %>
server.jdbc.url=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.url'] %>
server.jdbc.user.name=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.user.name'] %>
server.jdbc.user.passwd=<%= node['hw']['ambari']['server']['config']['ambari.properties']['server.jdbc.user.passwd'] %>
<% if node['platform_family'] == 'rhel' -%>
server.os_family=redhat<%= node['platform_version'].to_i %>
<% else %>
server.os_family=<%= "#{node['platform_family']}#{node['platform_version'].to_i}" %>
<% end -%>
server.os_type=<%= "#{node['platform']}#{node['platform_version'].to_i}" %>
server.persistence.type=remote
server.python.log.level=INFO
server.python.log.name=ambari-server-command.log
server.stages.parallel=true
server.startup.web.timeout=120
server.task.timeout=1200
server.tmp.dir=$ROOT/var/lib/ambari-server/data/tmp
server.version.file=$ROOT/var/lib/ambari-server/resources/version
shared.resources.dir=$ROOT/usr/lib/ambari-server/lib/ambari_commons/resources
skip.service.checks=false
stack.java.home=<%= node['java']['setup']['app_dir'] %>/<%= node['java'][@java_install][@java_version]['extract_dir'] %>
stackadvisor.script=$ROOT/var/lib/ambari-server/resources/scripts/stack_advisor.py
ulimit.open.files=65536
upgrade.parameter.convert.hive.tables.timeout=86400
upgrade.parameter.move.hive.tables.timeout=86400
user.inactivity.timeout.default=1800 # 30 mins for std users
user.inactivity.timeout.role.readonly.default=600 # 10 mins for read-only users
views.ambari.request.connect.timeout.millis=30000
views.ambari.request.read.timeout.millis=45000
views.http.cache-control=no-store
views.http.charset=utf-8
views.http.pragma=no-cache
views.http.strict-transport-security=max-age=31536000
views.http.x-content-type-options=nosniff
views.http.x-frame-options=SAMEORIGIN
views.http.x-xss-protection=1; mode=block
views.request.connect.timeout.millis=5000
views.request.read.timeout.millis=10000
views.skip.home-directory-check.file-system.list=wasb,adls,adl
webapp.dir=$ROOT/usr/lib/ambari-server/web

<% if node['hw']['ambari']['server']['config']['ambari.properties']['api.ssl'] == 'true' -%>
# Setup Truststore
ssl.trustStore.password=<%= node['hw']['ambari']['server']['config']['ambari.properties']['ssl.trustStore.password'] %>
ssl.trustStore.path=<%= node['hw']['ambari']['server']['config']['ambari.properties']['ssl.trustStore.path'] %>
ssl.trustStore.type=<%= node['hw']['ambari']['server']['config']['ambari.properties']['ssl.trustStore.type'] %>

# Enable HTTPS for Ambari server
api.ssl=<%= node['hw']['ambari']['server']['config']['ambari.properties']['api.ssl'] %>
client.api.ssl.cert_name=<%= node['hw']['ambari']['server']['config']['ambari.properties']['client.api.ssl.cert_name'] %>
client.api.ssl.key_name=<%= node['hw']['ambari']['server']['config']['ambari.properties']['client.api.ssl.key_name'] %>
client.api.ssl.port=<%= node['hw']['ambari']['server']['config']['ambari.properties']['client.api.ssl.port'] %>

# Enable Two-way SSL
security.server.two_way_ssl=<%= node['hw']['ambari']['server']['config']['ambari.properties']['security.server.two_way_ssl'] %>
<% end -%>

<% if node['hw']['ambari']['server']['config']['ambari.properties']['ambari.ldap.isConfigured'] == 'true' -%>
# LDAP integration
ambari.ldap.isConfigured=<%= node['hw']['ambari']['server']['config']['ambari.properties']['ambari.ldap.isConfigured'] %>
authentication.ldap.baseDn=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.baseDn'] %>
authentication.ldap.bindAnonymously=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.bindAnonymously'] %>
authentication.ldap.dnAttribute=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.dnAttribute'] %>
authentication.ldap.groupMembershipAttr=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.groupMembershipAttr'] %>
authentication.ldap.groupNamingAttr=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.groupNamingAttr'] %>
authentication.ldap.groupObjectClass=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.groupObjectClass'] %>
authentication.ldap.managerDn=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.managerDn'] %>
authentication.ldap.managerPassword=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.managerPassword'] %>
authentication.ldap.primaryUrl=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.primaryUrl'] %>
authentication.ldap.referral=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.referral'] %>
authentication.ldap.useSSL=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.useSSL'] %>
authentication.ldap.userObjectClass=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.userObjectClass'] %>
authentication.ldap.usernameAttribute=<%= node['hw']['ambari']['server']['config']['ambari.properties']['authentication.ldap.usernameAttribute'] %>
client.security=ldap
<% end -%>
