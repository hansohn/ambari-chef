# File managed by Chef -- changes will be overwritten

# Ambari Customizable Users
<%= node['hw']['ambari']['agent']['user']['name'] %> ALL=(ALL) NOPASSWD:SETENV: /bin/su hdfs *,/bin/su ambari-qa *,/bin/su ranger *,/bin/su zookeeper *,/bin/su knox *,/bin/su falcon *,/bin/su ams *, /bin/su flume *,/bin/su hbase *,/bin/su spark *,/bin/su accumulo *,/bin/su hive *,/bin/su hcat *,/bin/su kafka *,/bin/su mapred *,/bin/su oozie *,/bin/su sqoop *,/bin/su storm *,/bin/su tez *,/bin/su atlas *,/bin/su yarn *,/bin/su kms *, /bin/su infra-solr *, /bin/su logsearch *, /bin/su nifi *

# Ambari Non-Customizable Users
<%= node['hw']['ambari']['agent']['user']['name'] %> ALL=(ALL) NOPASSWD:SETENV: /bin/su mysql *

# Ambari Commands
<%= node['hw']['ambari']['agent']['user']['name'] %> ALL=(ALL) NOPASSWD:SETENV: /usr/sbin/ambari-metrics-grafana, /bin/ambari-python-wrap, /usr/bin/python, /usr/bin/yum, /usr/bin/zypper, /usr/bin/apt-get, /bin/mkdir, /usr/bin/test, /bin/ln, /bin/chown, /bin/chmod, /bin/chgrp, /usr/sbin/groupadd, /usr/sbin/groupmod, /usr/sbin/useradd, /usr/sbin/usermod, /bin/cp, /usr/sbin/setenforce, /usr/bin/test, /usr/bin/stat, /bin/mv, /bin/sed, /bin/rm, /bin/kill, /bin/readlink, /usr/bin/pgrep, /bin/cat, /usr/bin/unzip, /bin/tar, /usr/bin/tee, /bin/touch, /usr/bin/hdp-select, /usr/bin/conf-select, /usr/hdp/current/hadoop-client/sbin/hadoop-daemon.sh, /usr/lib/hadoop/bin/hadoop-daemon.sh, /usr/lib/hadoop/sbin/hadoop-daemon.sh, /sbin/chkconfig gmond off, /sbin/chkconfig gmetad off, /etc/init.d/httpd *, /sbin/service hdp-gmetad start, /sbin/service hdp-gmond start, /usr/sbin/gmond, /usr/sbin/update-rc.d ganglia-monitor *, /usr/sbin/update-rc.d gmetad *, /etc/init.d/apache2 *, /usr/sbin/service hdp-gmond *, /usr/sbin/service hdp-gmetad *, /sbin/service mysqld *, /usr/bin/python2.6 /var/lib/ambari-agent/data/tmp/validateKnoxStatus.py *, /usr/hdp/current/knox-server/bin/knoxcli.sh *, /usr/bin/dpkg *, /bin/rpm *, /usr/sbin/hst *, /bin/mysql, /var/lib/ambari-agent/tmp/addMysqlUser.sh, /bin/ls, /usr/lib/ambari-infra-solr-client/solrCloudCli.sh, /usr/lib/ambari-infra-solr/bin/solr, /usr/lib/ambari-logsearch-logfeeder/run.sh, /usr/bin/hdf-select

# Ambari Ranger Commands
<%= node['hw']['ambari']['agent']['user']['name'] %> ALL=(ALL) NOPASSWD:SETENV: /usr/hdp/*/ranger-usersync/setup.sh, /usr/bin/ranger-usersync-stop, /usr/bin/ranger-usersync-start, /usr/hdp/*/ranger-admin/setup.sh *, /usr/hdp/*/ranger-knox-plugin/disable-knox-plugin.sh *, /usr/hdp/*/ranger-storm-plugin/disable-storm-plugin.sh *, /usr/hdp/*/ranger-hbase-plugin/disable-hbase-plugin.sh *, /usr/hdp/*/ranger-hdfs-plugin/disable-hdfs-plugin.sh *,  /usr/hdp/current/ranger-admin/ranger_credential_helper.py, /usr/hdp/current/ranger-kms/ranger_credential_helper.py, /usr/hdp/*/ranger-*/ranger_credential_helper.py

# Ambari Interactive Commands
Defaults exempt_group = <%= node['hw']['ambari']['agent']['user']['name'] %>
Defaults exempt_group = <%= node['hw']['hadoop']['common']['group']['name'] %>
Defaults !env_reset,env_delete-=PATH
Defaults: <%= node['hw']['ambari']['agent']['user']['name'] %> !requiretty
